(function(){function i(n){return n.nodeType==8&&t.test(e?n.text:n.nodeValue)}function s(t){return t.nodeType==8&&n.test(e?t.text:t.nodeValue)}function o(e,t){var n=e,r=1,o=[];while(n=n.nextSibling){if(s(n)){r--;if(r===0)return o}o.push(n),i(n)&&r++}if(!t)throw new Error("Cannot find closing comment tag to match: "+e.nodeValue);return null}function u(e,t){var n=o(e,t);return n?n.length>0?n[n.length-1].nextSibling:e.nextSibling:null}function a(e){var t=e.firstChild,n=null;if(t)do if(n)n.push(t);else if(i(t)){var r=u(t,!0);r?t=r:n=[t]}else s(t)&&(n=[t]);while(t=t.nextSibling);return n}var e=document&&document.createComment("test").text==="<!--test-->",t=e?/^<!--\s*ko(?:\s+([\s\S]+))?\s*-->$/:/^\s*ko(?:\s+([\s\S]+))?\s*$/,n=e?/^<!--\s*\/ko\s*-->$/:/^\s*\/ko\s*$/,r={ul:!0,ol:!0};ko.virtualElements={allowedBindings:{},childNodes:function(e){return i(e)?o(e):e.childNodes},emptyNode:function(e){if(!i(e))ko.utils.emptyDomNode(e);else{var t=ko.virtualElements.childNodes(e);for(var n=0,r=t.length;n<r;n++)ko.removeNode(t[n])}},setDomNodeChildren:function(e,t){if(!i(e))ko.utils.setDomNodeChildren(e,t);else{ko.virtualElements.emptyNode(e);var n=e.nextSibling;for(var r=0,s=t.length;r<s;r++)n.parentNode.insertBefore(t[r],n)}},prepend:function(e,t){i(e)?e.parentNode.insertBefore(t,e.nextSibling):e.firstChild?e.insertBefore(t,e.firstChild):e.appendChild(t)},insertAfter:function(e,t,n){n?i(e)?e.parentNode.insertBefore(t,n.nextSibling):n.nextSibling?e.insertBefore(t,n.nextSibling):e.appendChild(t):ko.virtualElements.prepend(e,t)},firstChild:function(e){return i(e)?!e.nextSibling||s(e.nextSibling)?null:e.nextSibling:e.firstChild},nextSibling:function(e){return i(e)&&(e=u(e)),e.nextSibling&&s(e.nextSibling)?null:e.nextSibling},hasBindingValue:i,virtualNodeBindingValue:function(n){var r=(e?n.text:n.nodeValue).match(t);return r?r[1]:null},normaliseVirtualElementDomStructure:function(e){if(!r[ko.utils.tagNameLower(e)])return;var t=e.firstChild;if(t)do if(t.nodeType===1){var n=a(t);if(n){var i=t.nextSibling;for(var s=0;s<n.length;s++)i?e.insertBefore(n[s],i):e.appendChild(n[s])}}while(t=t.nextSibling)}}})(),ko.exportSymbol("virtualElements",ko.virtualElements),ko.exportSymbol("virtualElements.allowedBindings",ko.virtualElements.allowedBindings),ko.exportSymbol("virtualElements.emptyNode",ko.virtualElements.emptyNode),ko.exportSymbol("virtualElements.insertAfter",ko.virtualElements.insertAfter),ko.exportSymbol("virtualElements.prepend",ko.virtualElements.prepend),ko.exportSymbol("virtualElements.setDomNodeChildren",ko.virtualElements.setDomNodeChildren);