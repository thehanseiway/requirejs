ko.utils=function(){function e(e,t){for(var n in e)e.hasOwnProperty(n)&&t(n,e[n])}function t(e,t){if(t)for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e}function n(e,t){return e.__proto__=t,e}function c(e,t){if(ko.utils.tagNameLower(e)!=="input"||!e.type)return!1;if(t.toLowerCase()!="click")return!1;var n=e.type;return n=="checkbox"||n=="radio"}function p(e,t,n){var r;t&&(typeof e.classList=="object"?(r=e.classList[n?"add":"remove"],ko.utils.arrayForEach(t.match(h),function(t){r.call(e.classList,t)})):typeof e.className["baseVal"]=="string"?d(e.className,"baseVal",t,n):d(e,"className",t,n))}function d(e,t,n,r){var i=e[t].match(h)||[];ko.utils.arrayForEach(n.match(h),function(e){ko.utils.addOrRemoveItem(i,e,r)}),e[t]=i.join(" ")}var r={__proto__:[]}instanceof Array,i={},s={},o=navigator&&/Firefox\/2/i.test(navigator.userAgent)?"KeyboardEvent":"UIEvents";i[o]=["keyup","keydown","keypress"],i.MouseEvents=["click","dblclick","mousedown","mouseup","mousemove","mouseover","mouseout","mouseenter","mouseleave"],e(i,function(e,t){if(t.length)for(var n=0,r=t.length;n<r;n++)s[t[n]]=e});var u={propertychange:!0},a=document&&function(){var e=3,t=document.createElement("div"),n=t.getElementsByTagName("i");while(t.innerHTML="<!--[if gt IE "+ ++e+"]><i></i><![endif]-->",n[0]);return e>4?e:undefined}(),f=a===6,l=a===7,h=/\S+/g;return{fieldsIncludedWithJsonPost:["authenticity_token",/^__RequestVerificationToken(_.*)?$/],arrayForEach:function(e,t){for(var n=0,r=e.length;n<r;n++)t(e[n],n)},arrayIndexOf:function(e,t){if(typeof Array.prototype.indexOf=="function")return Array.prototype.indexOf.call(e,t);for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1},arrayFirst:function(e,t,n){for(var r=0,i=e.length;r<i;r++)if(t.call(n,e[r],r))return e[r];return null},arrayRemoveItem:function(e,t){var n=ko.utils.arrayIndexOf(e,t);n>0?e.splice(n,1):n===0&&e.shift()},arrayGetDistinctValues:function(e){e=e||[];var t=[];for(var n=0,r=e.length;n<r;n++)ko.utils.arrayIndexOf(t,e[n])<0&&t.push(e[n]);return t},arrayMap:function(e,t){e=e||[];var n=[];for(var r=0,i=e.length;r<i;r++)n.push(t(e[r],r));return n},arrayFilter:function(e,t){e=e||[];var n=[];for(var r=0,i=e.length;r<i;r++)t(e[r],r)&&n.push(e[r]);return n},arrayPushAll:function(e,t){if(t instanceof Array)e.push.apply(e,t);else for(var n=0,r=t.length;n<r;n++)e.push(t[n]);return e},addOrRemoveItem:function(e,t,n){var r=ko.utils.arrayIndexOf(ko.utils.peekObservable(e),t);r<0?n&&e.push(t):n||e.splice(r,1)},canSetPrototype:r,extend:t,setPrototypeOf:n,setPrototypeOfOrExtend:r?n:t,objectForEach:e,objectMap:function(e,t){if(!e)return e;var n={};for(var r in e)e.hasOwnProperty(r)&&(n[r]=t(e[r],r,e));return n},emptyDomNode:function(e){while(e.firstChild)ko.removeNode(e.firstChild)},moveCleanedNodesToContainerElement:function(e){var t=ko.utils.makeArray(e),n=t[0]&&t[0].ownerDocument||document,r=n.createElement("div");for(var i=0,s=t.length;i<s;i++)r.appendChild(ko.cleanNode(t[i]));return r},cloneNodes:function(e,t){for(var n=0,r=e.length,i=[];n<r;n++){var s=e[n].cloneNode(!0);i.push(t?ko.cleanNode(s):s)}return i},setDomNodeChildren:function(e,t){ko.utils.emptyDomNode(e);if(t)for(var n=0,r=t.length;n<r;n++)e.appendChild(t[n])},replaceDomNodes:function(e,t){var n=e.nodeType?[e]:e;if(n.length>0){var r=n[0],i=r.parentNode;for(var s=0,o=t.length;s<o;s++)i.insertBefore(t[s],r);for(var s=0,o=n.length;s<o;s++)ko.removeNode(n[s])}},fixUpContinuousNodeArray:function(e,t){if(e.length){t=t.nodeType===8&&t.parentNode||t;while(e.length&&e[0].parentNode!==t)e.splice(0,1);if(e.length>1){var n=e[0],r=e[e.length-1];e.length=0;while(n!==r){e.push(n),n=n.nextSibling;if(!n)return}e.push(r)}}return e},setOptionNodeSelectionState:function(e,t){a<7?e.setAttribute("selected",t):e.selected=t},stringTrim:function(e){return e===null||e===undefined?"":e.trim?e.trim():e.toString().replace(/^[\s\xa0]+|[\s\xa0]+$/g,"")},stringStartsWith:function(e,t){return e=e||"",t.length>e.length?!1:e.substring(0,t.length)===t},domNodeIsContainedBy:function(e,t){if(e===t)return!0;if(e.nodeType===11)return!1;if(t.contains)return t.contains(e.nodeType===3?e.parentNode:e);if(t.compareDocumentPosition)return(t.compareDocumentPosition(e)&16)==16;while(e&&e!=t)e=e.parentNode;return!!e},domNodeIsAttachedToDocument:function(e){return ko.utils.domNodeIsContainedBy(e,e.ownerDocument.documentElement)},anyDomNodeIsAttachedToDocument:function(e){return!!ko.utils.arrayFirst(e,ko.utils.domNodeIsAttachedToDocument)},tagNameLower:function(e){return e&&e.tagName&&e.tagName.toLowerCase()},registerEventHandler:function(e,t,n){var r=a&&u[t];if(!r&&jQueryInstance)jQueryInstance(e).bind(t,n);else if(!r&&typeof e.addEventListener=="function")e.addEventListener(t,n,!1);else{if(typeof e.attachEvent=="undefined")throw new Error("Browser doesn't support addEventListener or attachEvent");var i=function(t){n.call(e,t)},s="on"+t;e.attachEvent(s,i),ko.utils.domNodeDisposal.addDisposeCallback(e,function(){e.detachEvent(s,i)})}},triggerEvent:function(e,t){if(!e||!e.nodeType)throw new Error("element must be a DOM node when calling triggerEvent");var n=c(e,t);if(jQueryInstance&&!n)jQueryInstance(e).trigger(t);else if(typeof document.createEvent=="function"){if(typeof e.dispatchEvent!="function")throw new Error("The supplied element doesn't support dispatchEvent");var r=s[t]||"HTMLEvents",i=document.createEvent(r);i.initEvent(t,!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,e),e.dispatchEvent(i)}else if(n&&e.click)e.click();else{if(typeof e.fireEvent=="undefined")throw new Error("Browser doesn't support triggering events");e.fireEvent("on"+t)}},unwrapObservable:function(e){return ko.isObservable(e)?e():e},peekObservable:function(e){return ko.isObservable(e)?e.peek():e},toggleDomNodeCssClass:p,setTextContent:function(e,t){var n=ko.utils.unwrapObservable(t);if(n===null||n===undefined)n="";var r=ko.virtualElements.firstChild(e);!r||r.nodeType!=3||ko.virtualElements.nextSibling(r)?ko.virtualElements.setDomNodeChildren(e,[e.ownerDocument.createTextNode(n)]):r.data=n,ko.utils.forceRefresh(e)},setElementName:function(e,t){e.name=t;if(a<=7)try{e.mergeAttributes(document.createElement("<input name='"+e.name+"'/>"),!1)}catch(n){}},forceRefresh:function(e){if(a>=9){var t=e.nodeType==1?e:e.parentNode;t.style&&(t.style.zoom=t.style.zoom)}},ensureSelectElementIsRenderedCorrectly:function(e){if(a){var t=e.style.width;e.style.width=0,e.style.width=t}},range:function(e,t){e=ko.utils.unwrapObservable(e),t=ko.utils.unwrapObservable(t);var n=[];for(var r=e;r<=t;r++)n.push(r);return n},makeArray:function(e){var t=[];for(var n=0,r=e.length;n<r;n++)t.push(e[n]);return t},isIe6:f,isIe7:l,ieVersion:a,getFormFields:function(e,t){var n=ko.utils.makeArray(e.getElementsByTagName("input")).concat(ko.utils.makeArray(e.getElementsByTagName("textarea"))),r=typeof t=="string"?function(e){return e.name===t}:function(e){return t.test(e.name)},i=[];for(var s=n.length-1;s>=0;s--)r(n[s])&&i.push(n[s]);return i},parseJson:function(e){if(typeof e=="string"){e=ko.utils.stringTrim(e);if(e)return JSON&&JSON.parse?JSON.parse(e):(new Function("return "+e))()}return null},stringifyJson:function(e,t,n){if(!JSON||!JSON.stringify)throw new Error("Cannot find JSON.stringify(). Some browsers (e.g., IE < 8) don't support it natively, but you can overcome this by adding a script reference to json2.js, downloadable from http://www.json.org/json2.js");return JSON.stringify(ko.utils.unwrapObservable(e),t,n)},postJson:function(t,n,r){r=r||{};var i=r.params||{},s=r.includeFields||this.fieldsIncludedWithJsonPost,o=t;if(typeof t=="object"&&ko.utils.tagNameLower(t)==="form"){var u=t;o=u.action;for(var a=s.length-1;a>=0;a--){var f=ko.utils.getFormFields(u,s[a]);for(var l=f.length-1;l>=0;l--)i[f[l].name]=f[l].value}}n=ko.utils.unwrapObservable(n);var c=document.createElement("form");c.style.display="none",c.action=o,c.method="post";for(var h in n){var p=document.createElement("input");p.type="hidden",p.name=h,p.value=ko.utils.stringifyJson(ko.utils.unwrapObservable(n[h])),c.appendChild(p)}e(i,function(e,t){var n=document.createElement("input");n.type="hidden",n.name=e,n.value=t,c.appendChild(n)}),document.body.appendChild(c),r.submitter?r.submitter(c):c.submit(),setTimeout(function(){c.parentNode.removeChild(c)},0)}}}(),ko.exportSymbol("utils",ko.utils),ko.exportSymbol("utils.arrayForEach",ko.utils.arrayForEach),ko.exportSymbol("utils.arrayFirst",ko.utils.arrayFirst),ko.exportSymbol("utils.arrayFilter",ko.utils.arrayFilter),ko.exportSymbol("utils.arrayGetDistinctValues",ko.utils.arrayGetDistinctValues),ko.exportSymbol("utils.arrayIndexOf",ko.utils.arrayIndexOf),ko.exportSymbol("utils.arrayMap",ko.utils.arrayMap),ko.exportSymbol("utils.arrayPushAll",ko.utils.arrayPushAll),ko.exportSymbol("utils.arrayRemoveItem",ko.utils.arrayRemoveItem),ko.exportSymbol("utils.extend",ko.utils.extend),ko.exportSymbol("utils.fieldsIncludedWithJsonPost",ko.utils.fieldsIncludedWithJsonPost),ko.exportSymbol("utils.getFormFields",ko.utils.getFormFields),ko.exportSymbol("utils.peekObservable",ko.utils.peekObservable),ko.exportSymbol("utils.postJson",ko.utils.postJson),ko.exportSymbol("utils.parseJson",ko.utils.parseJson),ko.exportSymbol("utils.registerEventHandler",ko.utils.registerEventHandler),ko.exportSymbol("utils.stringifyJson",ko.utils.stringifyJson),ko.exportSymbol("utils.range",ko.utils.range),ko.exportSymbol("utils.toggleDomNodeCssClass",ko.utils.toggleDomNodeCssClass),ko.exportSymbol("utils.triggerEvent",ko.utils.triggerEvent),ko.exportSymbol("utils.unwrapObservable",ko.utils.unwrapObservable),ko.exportSymbol("utils.objectForEach",ko.utils.objectForEach),ko.exportSymbol("utils.addOrRemoveItem",ko.utils.addOrRemoveItem),ko.exportSymbol("utils.setTextContent",ko.utils.setTextContent),ko.exportSymbol("unwrap",ko.utils.unwrapObservable),Function.prototype.bind||(Function.prototype.bind=function(e){var t=this;if(arguments.length===1)return function(){return t.apply(e,arguments)};var n=Array.prototype.slice.call(arguments,1);return function(){var r=n.slice(0);return r.push.apply(r,arguments),t.apply(e,r)}});