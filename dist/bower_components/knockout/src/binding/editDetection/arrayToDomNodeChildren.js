(function(){function e(e,t,n,r,i){var s=[],o=ko.dependentObservable(function(){var o=t(n,i,ko.utils.fixUpContinuousNodeArray(s,e))||[];s.length>0&&(ko.utils.replaceDomNodes(s,o),r&&ko.dependencyDetection.ignore(r,null,[n,o,i])),s.length=0,ko.utils.arrayPushAll(s,o)},null,{disposeWhenNodeIsRemoved:e,disposeWhen:function(){return!ko.utils.anyDomNodeIsAttachedToDocument(s)}});return{mappedNodes:s,dependentObservable:o.isActive()?o:undefined}}var t=ko.utils.domData.nextKey();ko.utils.setDomNodeChildrenFromArrayMapping=function(n,r,i,s,o){function w(e,t){b=a[t],p!==t&&(g[e]=b),b.indexObservable(p++),ko.utils.fixUpContinuousNodeArray(b.mappedNodes,n),c.push(b),v.push(b)}function E(e,t){if(e)for(var n=0,r=t.length;n<r;n++)t[n]&&ko.utils.arrayForEach(t[n].mappedNodes,function(r){e(r,n,t[n].arrayEntry)})}r=r||[],s=s||{};var u=ko.utils.domData.get(n,t)===undefined,a=ko.utils.domData.get(n,t)||[],f=ko.utils.arrayMap(a,function(e){return e.arrayEntry}),l=ko.utils.compareArrays(f,r,s.dontLimitMoves),c=[],h=0,p=0,d=[],v=[],m=[],g=[],y=[],b;for(var S=0,x,T;x=l[S];S++){T=x.moved;switch(x.status){case"deleted":T===undefined&&(b=a[h],b.dependentObservable&&b.dependentObservable.dispose(),d.push.apply(d,ko.utils.fixUpContinuousNodeArray(b.mappedNodes,n)),s.beforeRemove&&(m[S]=b,v.push(b))),h++;break;case"retained":w(S,h++);break;case"added":T!==undefined?w(S,T):(b={arrayEntry:x.value,indexObservable:ko.observable(p++)},c.push(b),v.push(b),u||(y[S]=b))}}E(s.beforeMove,g),ko.utils.arrayForEach(d,s.beforeRemove?ko.cleanNode:ko.removeNode);for(var S=0,N=ko.virtualElements.firstChild(n),C,k;b=v[S];S++){b.mappedNodes||ko.utils.extend(b,e(n,i,b.arrayEntry,o,b.indexObservable));for(var L=0;k=b.mappedNodes[L];N=k.nextSibling,C=k,L++)k!==N&&ko.virtualElements.insertAfter(n,k,C);!b.initialized&&o&&(o(b.arrayEntry,b.mappedNodes,b.indexObservable),b.initialized=!0)}E(s.beforeRemove,m),E(s.afterMove,g),E(s.afterAdd,y),ko.utils.domData.set(n,t,c)}})(),ko.exportSymbol("utils.setDomNodeChildrenFromArrayMapping",ko.utils.setDomNodeChildrenFromArrayMapping);