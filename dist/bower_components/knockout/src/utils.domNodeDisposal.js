ko.utils.domNodeDisposal=new function(){function r(t,n){var r=ko.utils.domData.get(t,e);return r===undefined&&n&&(r=[],ko.utils.domData.set(t,e,r)),r}function i(t){ko.utils.domData.set(t,e,undefined)}function s(e){var t=r(e,!1);if(t){t=t.slice(0);for(var i=0;i<t.length;i++)t[i](e)}ko.utils.domData.clear(e),ko.utils.domNodeDisposal.cleanExternalData(e),n[e.nodeType]&&o(e)}function o(e){var t,n=e.firstChild;while(t=n)n=t.nextSibling,t.nodeType===8&&s(t)}var e=ko.utils.domData.nextKey(),t={1:!0,8:!0,9:!0},n={1:!0,9:!0};return{addDisposeCallback:function(e,t){if(typeof t!="function")throw new Error("Callback must be a function");r(e,!0).push(t)},removeDisposeCallback:function(e,t){var n=r(e,!1);n&&(ko.utils.arrayRemoveItem(n,t),n.length==0&&i(e))},cleanNode:function(e){if(t[e.nodeType]){s(e);if(n[e.nodeType]){var r=[];ko.utils.arrayPushAll(r,e.getElementsByTagName("*"));for(var i=0,o=r.length;i<o;i++)s(r[i])}}return e},removeNode:function(e){ko.cleanNode(e),e.parentNode&&e.parentNode.removeChild(e)},cleanExternalData:function(e){jQueryInstance&&typeof jQueryInstance["cleanData"]=="function"&&jQueryInstance.cleanData([e])}}},ko.cleanNode=ko.utils.domNodeDisposal.cleanNode,ko.removeNode=ko.utils.domNodeDisposal.removeNode,ko.exportSymbol("cleanNode",ko.cleanNode),ko.exportSymbol("removeNode",ko.removeNode),ko.exportSymbol("utils.domNodeDisposal",ko.utils.domNodeDisposal),ko.exportSymbol("utils.domNodeDisposal.addDisposeCallback",ko.utils.domNodeDisposal.addDisposeCallback),ko.exportSymbol("utils.domNodeDisposal.removeDisposeCallback",ko.utils.domNodeDisposal.removeDisposeCallback);